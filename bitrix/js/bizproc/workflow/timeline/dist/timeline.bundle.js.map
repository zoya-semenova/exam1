{"version":3,"file":"timeline.bundle.js","sources":["../src/views/errors-view.js","../src/timeline-task.js","../src/timeline.js"],"sourcesContent":["import { Tag, Dom, Type, Text } from 'main.core';\n\nexport class ErrorsView\n{\n\t#errors: Array<{ message: string }> = [];\n\n\tconstructor(props: {\n\t\terrors: Array<{ message: string }>,\n\t})\n\t{\n\t\tif (Type.isArrayFilled(props.errors))\n\t\t{\n\t\t\tthis.#errors = props.errors;\n\t\t}\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"bizproc-workflow-timeline_error-wrapper\">\n\t\t\t\t<div class=\"bizproc-workflow-timeline_error-inner\">\n\t\t\t\t\t${this.#errors.map(({ message }) => Tag.render`\n\t\t\t\t\t\t<p class=\"bizproc-workflow-timeline_error-text\">${Text.encode(message)}</p>\n\t\t\t\t\t`)}\n\t\t\t\t\t<div class=\"bizproc-workflow-timeline_error-img\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderTo(target: HTMLElement)\n\t{\n\t\tDom.append(this.render(), target);\n\t}\n}\n","import { Type } from 'main.core';\nimport { TaskUserData, TaskStatus } from 'bizproc.task';\nimport type { Timestamp } from 'bizproc.types';\n\nexport type TimelineTaskData = {\n\tcanView: boolean,\n\tstatus: number,\n\tid?: number,\n\tname?: string,\n\tmodified?: Timestamp,\n\tusers?: TaskUserData[],\n\texecutionTime: ?Timestamp,\n\tapproveType?: string,\n\turl: string,\n};\n\nexport class TimelineTask\n{\n\t#data: TimelineTaskData = {};\n\n\tconstructor(data: TimelineTaskData)\n\t{\n\t\tif (Type.isPlainObject(data))\n\t\t{\n\t\t\tthis.#data = data;\n\t\t}\n\t}\n\n\tcanView(): boolean\n\t{\n\t\treturn Type.isBoolean(this.#data.canView) ? this.#data.canView : false;\n\t}\n\n\tget status(): TaskStatus\n\t{\n\t\treturn new TaskStatus(this.#data.status);\n\t}\n\n\tget id(): number\n\t{\n\t\treturn Type.isInteger(this.#data.id) ? this.#data.id : 0;\n\t}\n\n\tget name(): string\n\t{\n\t\treturn Type.isString(this.#data.name) ? this.#data.name : '';\n\t}\n\n\tget modified(): Timestamp\n\t{\n\t\treturn Type.isInteger(this.#data.modified) ? Math.max(this.#data.modified, 0) : 0;\n\t}\n\n\tget users(): TaskUserData[]\n\t{\n\t\treturn Type.isArray(this.#data.users) ? this.#data.users : [];\n\t}\n\n\tget executionTime(): ?number\n\t{\n\t\treturn Type.isInteger(this.#data.executionTime) ? Math.max(this.#data.executionTime, 0) : null;\n\t}\n\n\tget approveType(): string\n\t{\n\t\treturn Type.isString(this.#data.approveType) ? this.#data.approveType : '';\n\t}\n\n\tget url(): ?null\n\t{\n\t\treturn Type.isStringFilled(this.#data.url) ? this.#data.url : null;\n\t}\n}\n","// eslint-disable-next-line max-classes-per-file\nimport { ajax, Type, Tag, Text, Dom, Runtime, Uri, Loc } from 'main.core';\nimport { DocumentId } from 'bizproc.document';\nimport { Timestamp, UserId } from 'bizproc.types';\nimport 'ui.icons.b24';\nimport 'ui.hint';\nimport { TextCrop } from 'ui.textcrop';\nimport { Popup } from 'main.popup';\nimport { TaskStatus, TaskUserData, TaskData } from 'bizproc.task';\nimport { DateTimeFormat } from 'main.date';\nimport { ErrorsView } from './views/errors-view';\n\nimport { TimelineTask } from './timeline-task';\n\nimport './css/style.css';\n\nexport type TimelineUserData = {\n\tid: UserId,\n\tlogin: string,\n\tname: string,\n\tlastName: string,\n\tsecondName: string,\n\tfullName: string,\n\tworkPosition: string,\n\tlink: string,\n\tavatarSize100: string,\n\tstatus: number,\n};\n\nexport type TimelineStatsData = {\n\taverageDuration: ?number,\n\tefficiency: string,\n};\n\nexport type TimelineData = {\n\tdocument: DocumentId,\n\tisWorkflowRunning: boolean,\n\ttimeToStart: ?Timestamp,\n\texecutionTime: ?Timestamp,\n\tstarted: ?Timestamp,\n\tstartedBy: UserId,\n\ttasks: TimelineTask[],\n\tusers: Map<UserId, TimelineUserData>,\n\tuserStatuses: Map<UserId, TaskStatus>,\n\tstats: TimelineStatsData,\n};\n\nexport class DurationFormatter\n{\n\tstatic #limits = [\n\t\t[3600 * 24 * 30 * 12, 'Ydiff'],\n\t\t[3600 * 24 * 30, 'mdiff'],\n\t\t[3600 * 24, 'ddiff'],\n\t\t[3600, 'Hdiff'],\n\t\t[60, 'idiff'],\n\t];\n\n\tstatic #getFormatString(seconds: number): string\n\t{\n\t\tfor (const limit of this.#limits)\n\t\t{\n\t\t\tif (seconds > limit[0])\n\t\t\t{\n\t\t\t\treturn limit[1];\n\t\t\t}\n\t\t}\n\n\t\treturn 'sdiff';\n\t}\n\n\tstatic #getMultiplierByFormat(format: string): number\n\t{\n\t\tfor (const limit of this.#limits)\n\t\t{\n\t\t\tif (format === limit[1])\n\t\t\t{\n\t\t\t\treturn limit[0];\n\t\t\t}\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\tstatic formatTimestamp(timestamp: number): string\n\t{\n\t\treturn DateTimeFormat.format(\n\t\t\tthis.#getFormatString(Date.now() / 1000 - timestamp),\n\t\t\ttimestamp,\n\t\t);\n\t}\n\n\tstatic formatTimeInterval(interval: ?number, values: number = 1): string\n\t{\n\t\tif (Type.isNil(interval))\n\t\t{\n\t\t\treturn Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_AVERAGE_PROCESS_TIME_UNKNOWN');\n\t\t}\n\n\t\tif (interval === 0)\n\t\t{\n\t\t\treturn Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_ZERO_SECOND_INTERVAL');\n\t\t}\n\n\t\tlet result = '';\n\t\tlet remainder = interval;\n\n\t\tfor (let i = 0; i < values; i++)\n\t\t{\n\t\t\tconst format = this.#getFormatString(remainder);\n\t\t\t// ignore seconds if we already have result\n\t\t\tif (result.length > 0 && format === 'sdiff')\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\tconst multiplier = this.#getMultiplierByFormat(format);\n\t\t\tresult += DateTimeFormat.format(format, 0, remainder);\n\t\t\tresult += ' ';\n\t\t\tif (multiplier > 0)\n\t\t\t{\n\t\t\t\tremainder %= multiplier;\n\t\t\t\tif (remainder === 0)\n\t\t\t\t{\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tstatic formatDate(timestamp: number, format: string): string\n\t{\n\t\treturn DateTimeFormat.format(format, timestamp);\n\t}\n}\n\nexport class Timeline\n{\n\t#workflowId: string;\n\t// #taskId: number;\n\t#data: ?TimelineData;\n\t#isLoaded: boolean;\n\t#errors: Array<{ message: string }> = [];\n\t#container: HTMLDivElement;\n\t#biPopup: HTMLDivElement;\n\t#dateFormat: string;\n\n\tconstructor(options: { workflowId: string, taskId?: number, }, config: { dateFormat: ?string, timeFormat: ?string, })\n\t{\n\t\tthis.#container = this.#renderContainer();\n\t\tsetTimeout(() => {\n\t\t\tthis.#textCrop();\n\t\t}, 500);\n\t\tif (Type.isPlainObject(options))\n\t\t{\n\t\t\tthis.#workflowId = options.workflowId;\n\t\t\t// this.#taskId = options.taskId;\n\t\t\tthis.#isLoaded = false;\n\n\t\t\tthis.#loadTimeline();\n\t\t}\n\n\t\tif (Type.isPlainObject(config))\n\t\t{\n\t\t\tthis.#dateFormat = `${config.dateFormat || 'j F Y'} ${config.timeFormat || 'H:i'}`;\n\t\t}\n\t}\n\n\tstatic open(options: { workflowId: string, taskId?: number }): void\n\t{\n\t\tRuntime\n\t\t\t.loadExtension('sidepanel')\n\t\t\t.then(() => {\n\t\t\t\tBX.SidePanel.Instance.open(\n\t\t\t\t\tUri.addParam(\n\t\t\t\t\t\t'/bitrix/components/bitrix/bizproc.workflow.timeline.slider/index.php',\n\t\t\t\t\t\tType.isPlainObject(options) ? options : {},\n\t\t\t\t\t),\n\t\t\t\t\t{\n\t\t\t\t\t\twidth: 950,\n\t\t\t\t\t\tallowChangeHistory: false,\n\t\t\t\t\t\tcacheable: false,\n\t\t\t\t\t\tloader: '/bitrix/js/bizproc/workflow/timeline/img/skeleton.svg',\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t})\n\t\t\t.catch((response) => console.error(response.errors))\n\t\t;\n\t}\n\n\tstatic #tooLongProcessDuration(): number\n\t{\n\t\t// Three days, too much for business process\n\t\treturn 60 * 60 * 24 * 3;\n\t}\n\n\t#loadTimeline(): void\n\t{\n\t\tajax.runAction('bizproc.workflow.getTimeline', {\n\t\t\tdata: { workflowId: this.#workflowId },\n\t\t}).then((response) => {\n\t\t\tthis.#setDataFromResponse(response);\n\t\t\tthis.#isLoaded = true;\n\t\t\tthis.render();\n\t\t}).catch((response) => {\n\t\t\tthis.#setDataFromResponse(response);\n\t\t\tthis.#isLoaded = true;\n\t\t\tthis.render();\n\t\t});\n\t}\n\n\t#setDataFromResponse(response): void\n\t{\n\t\tif (Type.isPlainObject(response))\n\t\t{\n\t\t\tconst getString = (value, defaultValue = '') => (Type.isString(value) ? value : defaultValue);\n\t\t\tconst getArray = (value, defaultValue = []) => (Type.isArray(value) ? value : defaultValue);\n\t\t\tconst getBool = (value, defaultValue = false) => (Type.isBoolean(value) ? value : defaultValue);\n\t\t\tconst getInteger = (value, defaultValue = 0) => (Type.isInteger(value) ? value : defaultValue);\n\n\t\t\tif (Type.isPlainObject(response.data))\n\t\t\t{\n\t\t\t\tthis.#data = {\n\t\t\t\t\tdocument: new DocumentId({\n\t\t\t\t\t\tdocumentId: getArray(response.data.documentType),\n\t\t\t\t\t\tentityName: getString(response.data.entityName),\n\t\t\t\t\t\tdocumentName: getString(response.data.documentName),\n\t\t\t\t\t\tdocumentUrl: getString(response.data.documentUrl),\n\t\t\t\t\t\tmoduleName: getString(response.data.moduleName),\n\t\t\t\t\t}),\n\t\t\t\t\tisWorkflowRunning: getBool(response.data.isWorkflowRunning),\n\t\t\t\t\ttimeToStart: getInteger(response.data.timeToStart, null),\n\t\t\t\t\texecutionTime: getInteger(response.data.executionTime, null),\n\t\t\t\t\tstarted: getInteger(response.data.started, null),\n\t\t\t\t\tstartedBy: getInteger(response.data.startedBy),\n\t\t\t\t\ttasks: getArray(response.data.tasks).map((taskData) => new TimelineTask(taskData)),\n\t\t\t\t\tusers: new Map(),\n\t\t\t\t\tstats: {\n\t\t\t\t\t\taverageDuration: getInteger(response.data.stats.averageDuration, null),\n\t\t\t\t\t\tefficiency: getString(response.data.stats.efficiency),\n\t\t\t\t\t},\n\t\t\t\t};\n\n\t\t\t\tfor (const user of getArray(response.data.users))\n\t\t\t\t{\n\t\t\t\t\tthis.#data.users.set(Text.toInteger(user.id), user);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.#errors = getArray(response.errors);\n\t\t}\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tDom.clean(this.#container);\n\n\t\tif (this.#hasErrors())\n\t\t{\n\t\t\tconst errorsView = new ErrorsView({ errors: this.#errors });\n\t\t\terrorsView.renderTo(this.#container);\n\n\t\t\treturn this.#container;\n\t\t}\n\n\t\tif (!this.#isLoaded)\n\t\t{\n\t\t\tDom.append(this.#renderLoadingStub(), this.#container);\n\t\t}\n\n\t\tif (Type.isPlainObject(this.#data))\n\t\t{\n\t\t\tDom.replace(this.#container, this.#renderContainer());\n\t\t\tthis.#createEfficiencyPopup().show();\n\t\t\t// this.showBiPopup();\n\t\t}\n\n\t\treturn this.#container;\n\t}\n\n\t#renderItemTitle(title, iconClass, iconText, crop): HTMLElement\n\t{\n\t\tconst iconClassValue = Type.isString(iconClass) ? (` ${iconClass}`) : '';\n\t\tconst iconTextValue = Type.isString(iconText) ? iconText : '';\n\t\tconst cropValue = crop ? ' data-crop=\"crop\"' : '';\n\n\t\treturn Tag.render`\n\t\t\t<div>\n\t\t\t\t<span class=\"bizproc-workflow-timeline-icon${iconClassValue}\">${iconTextValue}</span>\n\t\t\t\t<div class=\"bizproc-workflow-timeline-title\"${cropValue}>${Text.encode(title)}</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderSubject(subject): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"bizproc-workflow-timeline-subject\">${Text.encode(subject)}</div>\n\t\t`;\n\t}\n\n\t#renderProceedTaskButton(task: TaskData): HTMLElement\n\t{\n\t\tconst uri = (\n\t\t\ttask.url\n\t\t\t|| new Uri('/bitrix/components/bitrix/bizproc.workflow.info/')\n\t\t\t\t.setQueryParams({ workflow: this.#workflowId, task: task.id })\n\t\t\t\t.toString()\n\t\t);\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"task-button --hidden\">\n\t\t\t\t<a class=\"ui-btn ui-btn-xs ui-btn-primary ui-btn-round\" href=\"${Text.encode(uri)}\">\n\t\t\t\t\t${Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_BUTTON_PROCEED')}\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderUser(userId: UserId, userData: ?TaskUserData = null, task: ?TaskData = null): HTMLElement\n\t{\n\t\tconst user = this.#data.users.get(userId || userData.id);\n\t\tlet userClass = '';\n\t\tlet isWaiting = false;\n\t\tif (userData)\n\t\t{\n\t\t\tconst status = new TaskStatus(userData.status);\n\t\t\tif (status.isYes() || status.isOk())\n\t\t\t{\n\t\t\t\tuserClass = ' --voted-up';\n\t\t\t}\n\n\t\t\tif (status.isNo())\n\t\t\t{\n\t\t\t\tuserClass = ' --voted-down';\n\t\t\t}\n\n\t\t\tif (status.isWaiting())\n\t\t\t{\n\t\t\t\tisWaiting = true;\n\t\t\t}\n\t\t}\n\t\tconst position = Type.isString(user.workPosition)\n\t\t\t? (`<div class=\"bizproc-workflow-timeline-user-pos\">${Text.encode(user.workPosition)}</div>`)\n\t\t\t: '';\n\t\tlet avatar = '<i></i>';\n\t\tif (Type.isString(user.avatarSize100))\n\t\t{\n\t\t\tavatar = `<i style=\"background-image: url('${user.avatarSize100}')\"></i>`;\n\t\t}\n\t\tconst button = (task?.id && isWaiting) ? this.#renderProceedTaskButton(task) : '';\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"bizproc-workflow-timeline-user${userClass}\">\n\t\t\t\t<div class=\"bizproc-workflow-timeline-userlogo ui-icon ui-icon-common-user\">\n\t\t\t\t\t${avatar}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bizproc-workflow-timeline-user-block\">\n\t\t\t\t\t<a class=\"bizproc-workflow-timeline-link\" href=\"${user.link}\">${Text.encode(user.fullName)}</a>\n\t\t\t\t\t${position}\n\t\t\t\t</div>\n\t\t\t\t${button}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderDoc(name, link, type, iconClass): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"bizproc-workflow-timeline-doc\">\n\t\t\t\t${this.#renderCaption(Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_START_DOC'))}\n\t\t\t\t<div class=\"bizproc-workflow-timeline-type\">\n\t\t\t\t\t<span class=\"ui-icon-set ${iconClass}\"></span>\n\t\t\t\t\t<span class=\"bizproc-workflow-timeline-type-text\">${type}</span>\n\t\t\t\t</div>\n\t\t\t\t<a class=\"bizproc-workflow-timeline-link\" href=\"${link}\" target=\"_top\">${Text.encode(name)}</a>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderCaption(caption): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"bizproc-workflow-timeline-caption\">${caption}</div>\n\t\t`;\n\t}\n\n\t#renderNotice(subject, text): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"bizproc-workflow-timeline-notice\">\n\t\t\t\t<div class=\"bizproc-workflow-timeline-subject\">${Text.encode(subject)}</div>\n\t\t\t\t<span class=\"bizproc-workflow-timeline-text\">${Text.encode(text)}</span>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderHighlightedNotice(subject, text): HTMLElement\n\t{\n\t\tconst timelineNotice = Tag.render`\n\t\t\t<div class=\"bizproc-workflow-timeline-notice\">\n\t\t\t\t<div class=\"bizproc-workflow-timeline-subject\">${Text.encode(subject)}</div>\n\t\t\t\t<span class=\"bizproc-workflow-timeline-text\">${Text.encode(text)}</span>\n\t\t\t\t<span\n\t\t\t\t\tdata-hint=\"${Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_TIME_LIMIT_EXCEEDED')}\"\n\t\t\t\t></span>\n\t\t\t</div>\n\t\t`;\n\t\tBX.UI.Hint.init(timelineNotice);\n\n\t\treturn timelineNotice;\n\t}\n\n\t#renderStatus(text, statusClass): HTMLElement\n\t{\n\t\tconst statusClassValue = Type.isString(statusClass) ? (` ${statusClass}`) : '';\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"bizproc-workflow-timeline-status${statusClassValue}\">${Text.encode(text)}</div>\n\t\t`;\n\t}\n\n\t#renderMore(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"bizproc-workflow-timeline-item --more\">\n\t\t\t\t<div class=\"bizproc-workflow-timeline-item-inner\">\n\t\t\t\t\t<span class=\"bizproc-workflow-timeline-icon\"></span>\n\t\t\t\t\t<button class=\"ui-btn ui-btn-light-border ui-btn-xs\" type=\"button\" onclick=\"expandMore(event)\">\n\t\t\t\t\t\t<span class=\"ui-btn-text\">\n\t\t\t\t\t\t\t${Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_MORE_TASKS')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<script type=\"text/javascript\">\n\t\t\t\t\t\tfunction expandMore(event)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst moreItemBlock = event.target.closest('.--more');\n\t\t\t\t\t\t\tconst hiddenBlocks = document.querySelectorAll('.bizproc-workflow-timeline-item.--hidden:not(.--efficiency)');\n\t\t\t\t\t\t\tBX.Dom.addClass(moreItemBlock, '--hidden');\n\t\t\t\t\t\t\thiddenBlocks.forEach((hiddenBlock) => BX.Dom.removeClass(hiddenBlock, '--hidden'));\n\t\t\t\t\t\t}\n\t\t\t\t\t</script>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderContent(children): HTMLElement\n\t{\n\t\treturn (Tag.render`\n\t\t\t<div class=\"bizproc-workflow-timeline-content\">\n\t\t\t\t${children}\n\t\t\t</div>\n\t\t`);\n\t}\n\n\t#renderItem(children, itemClass, efficiencyClass): HTMLElement\n\t{\n\t\tconst itemClassValue = Type.isString(itemClass) ? (` ${itemClass}`) : '';\n\t\tconst efficiencyClassValue = (\n\t\t\tType.isString(efficiencyClass) ? (` data-efficiency-class=\"${efficiencyClass}\"`) : ''\n\t\t);\n\n\t\treturn (Tag.render`\n\t\t\t<div class=\"bizproc-workflow-timeline-item${itemClassValue}\"${efficiencyClassValue}>\n\t\t\t\t<div class=\"bizproc-workflow-timeline-item-inner\">\n\t\t\t\t\t${children}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`);\n\t}\n\n\t#renderUserList(children): HTMLElement\n\t{\n\t\tlet hideMarksScript = '';\n\t\tif (children.length === 1)\n\t\t{\n\t\t\thideMarksScript = Tag.render`\n\t\t\t\t<script type=\"text/javascript\">\n\t\t\t\t\t(function () {\n\t\t\t\t\t\tfor (let userItem of document\n\t\t\t\t\t\t\t.currentScript\n\t\t\t\t\t\t\t.closest('.bizproc-workflow-timeline-user-list')\n\t\t\t\t\t\t\t.querySelectorAll('.bizproc-workflow-timeline-user')\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.Dom.removeClass(userItem, ['--voted-up', '--voted-down']);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t)();\n\t\t\t\t</script>\n\t\t\t`;\n\t\t}\n\n\t\treturn (Tag.render`\n\t\t\t<div class=\"bizproc-workflow-timeline-user-list\">\n\t\t\t\t${children}\n\t\t\t\t${hideMarksScript}\n\t\t\t</div>\n\t\t`);\n\t}\n\n\t#renderVoteCaption(votedCnt, totalCnt): HTMLElement\n\t{\n\t\treturn this.#renderCaption(\n\t\t\tLoc.getMessage(\n\t\t\t\t'BIZPROC_WORKFLOW_TIMELINE_SLIDER_VOTED',\n\t\t\t\t{\n\t\t\t\t\t'#VOTED#': votedCnt,\n\t\t\t\t\t'#TOTAL#': totalCnt,\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\t}\n\n\tgetStatusName(taskStatus: TaskStatus, taskApproveType: string = ''): string\n\t{\n\t\tif (taskStatus.isYes() || taskStatus.isOk())\n\t\t{\n\t\t\treturn Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_PERFORMED');\n\t\t}\n\n\t\tif (taskStatus.isNo() || taskStatus.isCancel())\n\t\t{\n\t\t\treturn Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_DECLINED');\n\t\t}\n\n\t\tif (taskStatus.isWaiting())\n\t\t{\n\t\t\tlet message = '';\n\t\t\tswitch (taskApproveType)\n\t\t\t{\n\t\t\t\tcase 'all': message = Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_PERFORMING_ALL');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'any': message = Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_PERFORMING_ANY');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'vote': message = Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_PERFORMING_ALL');\n\t\t\t\t\tbreak;\n\t\t\t\tdefault: message = Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_PERFORMING');\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn message;\n\t\t}\n\n\t\treturn taskStatus.name;\n\t}\n\n\t#renderItemsList(items): HTMLElement\n\t{\n\t\treturn (Tag.render`\n\t\t\t<div class=\"bizproc-workflow-timeline-wrapper\">\n\t\t\t\t<div class=\"bizproc-workflow-timeline-inner\">\n\t\t\t\t\t<div class=\"bizproc-workflow-timeline-list\">\n\t\t\t\t\t\t${items}\n\t\t\t\t\t</div>\n\t\t\t\t\t<script type=\"text/javascript\">\n\t\t\t\t\t\t(function() {\n\t\t\t\t\t\t\tconst buttons = document.querySelectorAll('.task-button.--hidden');\n\t\t\t\t\t\t\tconst showButtons = buttons.length > 1;\n\t\t\t\t\t\t\tbuttons.forEach(function (button) {\n\t\t\t\t\t\t\t\tBX.Dom.insertBefore(\n\t\t\t\t\t\t\t\t\tbutton.closest('.bizproc-workflow-timeline-user'),\n\t\t\t\t\t\t\t\t\tbutton.closest('.bizproc-workflow-timeline-user-list').firstChild\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tif (showButtons)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tBX.Dom.removeClass(button, '--hidden')\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t})();\n\t\t\t\t\t</script>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`);\n\t}\n\n\t#renderFirstBlock(): HTMLElement\n\t{\n\t\tconst content = [];\n\t\tif (this.#data.startedBy)\n\t\t{\n\t\t\tcontent.push(\n\t\t\t\tthis.#renderCaption(Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_FROM')),\n\t\t\t\tthis.#renderUser(this.#data.startedBy),\n\t\t\t);\n\t\t}\n\t\tcontent.push(\n\t\t\tthis.#renderDoc(\n\t\t\t\tthis.#data.document.name,\n\t\t\t\tthis.#data.document.url,\n\t\t\t\tthis.#data.document.moduleName,\n\t\t\t\t'--file-2',\n\t\t\t),\n\t\t);\n\n\t\tif (!Type.isNil(this.#data.timeToStart))\n\t\t{\n\t\t\tcontent.push(this.#renderNotice(\n\t\t\t\tLoc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_EXECUTION_TIME'),\n\t\t\t\tDurationFormatter.formatTimeInterval(this.#data.timeToStart, 2),\n\t\t\t));\n\t\t}\n\n\t\treturn this.#renderItem([\n\t\t\tthis.#renderItemTitle(\n\t\t\t\tthis.#data.document.entityName,\n\t\t\t\t'--success',\n\t\t\t\t'1',\n\t\t\t),\n\t\t\tthis.#data.started && this.#renderSubject(DurationFormatter.formatDate(this.#data.started, this.#dateFormat)),\n\t\t\tthis.#renderContent(content),\n\t\t], '--selected');\n\t}\n\n\t// eslint-disable-next-line max-lines-per-function\n\t#renderContainer(): HTMLElement\n\t{\n\t\tconst items = [];\n\t\tlet efficiencyClass = '';\n\t\tlet isWaiting = false;\n\n\t\tif (this.#data)\n\t\t{\n\t\t\tlet taskNumber = 1;\n\t\t\tlet task = null;\n\t\t\tlet hasHidden = false;\n\t\t\tlet userId = Loc.getMessage('USER_ID');\n\t\t\tuserId = userId ? parseInt(userId, 10) : null;\n\n\t\t\titems.push(this.#renderFirstBlock());\n\n\t\t\tfor (const taskIndex of Object.keys(this.#data.tasks))\n\t\t\t{\n\t\t\t\ttask = this.#data.tasks[taskIndex];\n\t\t\t\tlet iconClass = null;\n\n\t\t\t\tlet taskNumberNeeded = true;\n\t\t\t\tisWaiting = task.status.isWaiting();\n\t\t\t\tif (task.canView())\n\t\t\t\t{\n\t\t\t\t\tconst content = [];\n\t\t\t\t\tif (isWaiting)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (hasHidden)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\titems.push(this.#renderMore());\n\t\t\t\t\t\t\thasHidden = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ticonClass = '--processing';\n\t\t\t\t\t\ttaskNumberNeeded = false;\n\t\t\t\t\t\tif (task.approveType === 'vote')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlet votedCnt = 0;\n\t\t\t\t\t\t\t// eslint-disable-next-line max-depth\n\t\t\t\t\t\t\tfor (const user of task.users)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t// eslint-disable-next-line max-depth\n\t\t\t\t\t\t\t\tif (!(new TaskStatus(user.status).isWaiting()))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tvotedCnt++;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcontent.push(this.#renderVoteCaption(votedCnt, task.users.length));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcontent.push(this.#renderCaption(this.getStatusName(task.status, task.approveType)));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\thasHidden = true;\n\t\t\t\t\t\tif (task.status.isOk() || task.status.isYes())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ticonClass = '--success';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontent.push(this.#renderCaption(this.getStatusName(task.status)));\n\t\t\t\t\t}\n\t\t\t\t\tconst users = [];\n\t\t\t\t\tfor (const user of Object.values(task.users))\n\t\t\t\t\t{\n\t\t\t\t\t\tusers.push(this.#renderUser(null, user, (user.id === userId) ? task : null));\n\t\t\t\t\t}\n\n\t\t\t\t\tif (users.length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tcontent.push(this.#renderUserList(users));\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!Type.isNil(task.executionTime))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontent.push(\n\t\t\t\t\t\t\t(task.executionTime < Timeline.#tooLongProcessDuration())\n\t\t\t\t\t\t\t\t? this.#renderNotice(\n\t\t\t\t\t\t\t\t\tLoc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_EXECUTION_TIME'),\n\t\t\t\t\t\t\t\t\tDurationFormatter.formatTimeInterval(task.executionTime, 2),\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t: this.#renderHighlightedNotice(\n\t\t\t\t\t\t\t\t\tLoc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_EXECUTION_TIME'),\n\t\t\t\t\t\t\t\t\tDurationFormatter.formatTimeInterval(task.executionTime, 2),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\titems.push(this.#renderItem([\n\t\t\t\t\t\tthis.#renderItemTitle(\n\t\t\t\t\t\t\ttask.name,\n\t\t\t\t\t\t\ticonClass,\n\t\t\t\t\t\t\ttaskNumberNeeded ? ((++taskNumber).toString()) : null,\n\t\t\t\t\t\t),\n\t\t\t\t\t\tthis.#renderSubject(DurationFormatter.formatDate(task.modified, this.#dateFormat)),\n\t\t\t\t\t\tthis.#renderContent(content),\n\t\t\t\t\t], isWaiting ? '--processing' : '--hidden'));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet techItemClass = '--tech';\n\t\t\t\t\tif (isWaiting && this.#data.tasks.length > 1)\n\t\t\t\t\t{\n\t\t\t\t\t\ttechItemClass += ' --hidden';\n\t\t\t\t\t\thasHidden = true;\n\t\t\t\t\t}\n\t\t\t\t\titems.push(this.#renderItem([\n\t\t\t\t\t\tthis.#renderItemTitle(Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_NO_RIGHTS_TO_VIEW')),\n\t\t\t\t\t\tthis.#renderSubject(Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_NO_RIGHTS_TO_VIEW_TIP')),\n\t\t\t\t\t], techItemClass));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (hasHidden)\n\t\t\t{\n\t\t\t\titems.push(this.#renderMore());\n\t\t\t}\n\n\t\t\tif (this.#data.isWorkflowRunning)\n\t\t\t{\n\t\t\t\tif (isWaiting)\n\t\t\t\t{\n\t\t\t\t\titems.push(this.#renderItem([\n\t\t\t\t\t\tthis.#renderItemTitle(Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_IN_PROGRESS')),\n\t\t\t\t\t\tthis.#renderSubject(\n\t\t\t\t\t\t\tLoc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_IN_PROGRESS_TIP'),\n\t\t\t\t\t\t),\n\t\t\t\t\t], '--tech --previous-item'));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\titems.push(this.#renderItem([\n\t\t\t\t\t\tthis.#renderItemTitle(Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_IN_PROGRESS_INTERMEDIATE')),\n\t\t\t\t\t\tthis.#renderSubject(\n\t\t\t\t\t\t\tLoc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_IN_PROGRESS_INTERMEDIATE_TIP'),\n\t\t\t\t\t\t),\n\t\t\t\t\t], '--tech --previous-item'));\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst isOk = !task || task.status.isOk() || task.status.isYes();\n\t\t\t\tconst content = [\n\t\t\t\t\tthis.#renderCaption(Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_PROCESS_FINISHED')),\n\t\t\t\t];\n\t\t\t\tif (this.#data.startedBy)\n\t\t\t\t{\n\t\t\t\t\tcontent.push(\n\t\t\t\t\t\tisOk\n\t\t\t\t\t\t\t? this.#renderStatus(Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_APPROVED_FOR'))\n\t\t\t\t\t\t\t: this.#renderStatus(\n\t\t\t\t\t\t\t\tLoc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_DECLINED'),\n\t\t\t\t\t\t\t\t'--failure',\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\tthis.#renderUser(this.#data.startedBy),\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tcontent.push(this.#renderNotice(\n\t\t\t\t\tLoc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_PROCESS_EXECUTED'),\n\t\t\t\t\tDurationFormatter.formatTimeInterval(this.#data.executionTime),\n\t\t\t\t));\n\t\t\t\tefficiencyClass = isOk ? '--success' : '--declined';\n\t\t\t\titems.push(\n\t\t\t\t\tthis.#renderItem(\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\tthis.#renderItemTitle(\n\t\t\t\t\t\t\t\tthis.#data.document.entityName,\n\t\t\t\t\t\t\t\tisOk ? '--success' : null,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tthis.#data.started && this.#renderSubject(\n\t\t\t\t\t\t\t\tDurationFormatter.formatDate(\n\t\t\t\t\t\t\t\t\tthis.#data.started + this.#data.executionTime,\n\t\t\t\t\t\t\t\t\tthis.#dateFormat,\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tthis.#renderContent(content),\n\t\t\t\t\t\t],\n\t\t\t\t\t\tisOk ? '--success --previous' : '--declined --selected --previous',\n\t\t\t\t\t\tefficiencyClass,\n\t\t\t\t\t),\n\t\t\t\t\tthis.#renderEfficiencyInlineContent(),\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn this.#renderItemsList(items);\n\t}\n\n\t#textCrop()\n\t{\n\t\tconst textCropNodes = document.querySelectorAll('[data-crop=\"crop\"]');\n\t\tfor (const textCropNode of textCropNodes)\n\t\t{\n\t\t\tconst text = new TextCrop({\n\t\t\t\trows: 2,\n\t\t\t\ttarget: textCropNode,\n\n\t\t\t});\n\t\t\ttext.init();\n\t\t}\n\t}\n\n\t#createEfficiencyPopup(): Popup\n\t{\n\t\treturn new Popup({\n\t\t\twidth: 403,\n\t\t\tminHeight: 345,\n\t\t\tcloseIcon: true,\n\t\t\tcontent: this.#renderEfficiencyPopupContent(),\n\t\t\tbindElement: {\n\t\t\t\tleft: 555,\n\t\t\t\ttop: 130,\n\t\t\t},\n\t\t\tpadding: 26,\n\t\t\tborderRadius: '18px',\n\t\t\tclassName: '--bizproc-timeline-popup',\n\t\t\tevents: {\n\t\t\t\tonPopupClose: () => {\n\t\t\t\t\tlet inlineEfficiencyPrev = document.querySelector('.--previous-item');\n\t\t\t\t\tif (!inlineEfficiencyPrev)\n\t\t\t\t\t{\n\t\t\t\t\t\tinlineEfficiencyPrev = document.querySelector('.bizproc-workflow-timeline-item.--processing');\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!inlineEfficiencyPrev)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tBX.Dom.addClass(inlineEfficiencyPrev, '--previous');\n\t\t\t\t\tlet efficiencyInlineClass = inlineEfficiencyPrev.getAttribute('data-efficiency-class');\n\t\t\t\t\tif (!efficiencyInlineClass)\n\t\t\t\t\t{\n\t\t\t\t\t\tefficiencyInlineClass = '';\n\t\t\t\t\t}\n\t\t\t\t\tinlineEfficiencyPrev.after(this.#renderEfficiencyInlineContent(efficiencyInlineClass));\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}\n\n\t#getEfficiencyData()\n\t{\n\t\tlet logoClass = '--first';\n\t\tlet notice = Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_NO_STATS');\n\n\t\tswitch (this.#data.stats.efficiency)\n\t\t{\n\t\t\tcase 'fast':\n\t\t\t\tif (\n\t\t\t\t\tDurationFormatter.formatTimeInterval(this.#data.stats.averageDuration)\n\t\t\t\t\t=== DurationFormatter.formatTimeInterval(this.#data.executionTime)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tlogoClass = '--slow';\n\t\t\t\t\tnotice = Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_PERFORMED_SLOWLY');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlogoClass = '--fast';\n\t\t\t\t\tnotice = Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_PERFORMED_QUICKLY');\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'slow':\n\t\t\t\tlogoClass = '--slow';\n\t\t\t\tnotice = Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_PERFORMED_SLOWLY');\n\t\t\t\tbreak;\n\t\t\tcase 'stopped':\n\t\t\t\tlogoClass = '--stopped';\n\t\t\t\tnotice = Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_PERFORMED_NO_PROGRESS');\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn [logoClass, notice];\n\t}\n\n\t#renderEfficiencyInlineContent(itemClass: string): HTMLElement\n\t{\n\t\tconst [logoClass, notice] = this.#getEfficiencyData();\n\n\t\tconst efficiencyInlineContent = Tag.render`\n\t\t\t<div class=\"bizproc-workflow-timeline-item --efficiency ${itemClass}\">\n\t\t\t\t<div class=\"bizproc-workflow-timeline-item-inner\">\n\t\t\t\t\t<div class=\"bizproc-workflow-timeline-title\">\n\t\t\t\t\t\t${Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_EFFECTIVITY_MARK')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"bizproc-workflow-timeline-content\">\n\t\t\t\t\t\t<div class=\"bizproc-workflow-timeline-eff-icon ${logoClass}\"></div>\n\t\t\t\t\t\t<div class=\"bizproc-workflow-timeline-content-inner\">\n\t\t\t\t\t\t\t<div class=\"bizproc-workflow-timeline-caption\">${notice}</div>\n\t\t\t\t\t\t\t<div class=\"bizproc-workflow-timeline-notice\">\n\t\t\t\t\t\t\t\t<div class=\"bizproc-workflow-timeline-subject\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_CURRENT_PROCESS_TIME')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<span class=\"bizproc-workflow-timeline-text\">\n\t\t\t\t\t\t\t\t\t${DurationFormatter.formatTimeInterval(this.#data.executionTime)}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tdata-hint=\"${Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_TIME_DIFFERENCE')}\"\n\t\t\t\t\t\t\t\t></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"bizproc-workflow-timeline-notice\">\n\t\t\t\t\t\t\t\t<div class=\"bizproc-workflow-timeline-subject\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_AVERAGE_PROCESS_TIME')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<span class=\"bizproc-workflow-timeline-text\">\n\t\t\t\t\t\t\t\t\t${\n\t\t\t\t\t\t\t\t\t\t(this.#data.stats.averageDuration === null)\n\t\t\t\t\t\t\t\t\t\t\t? Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_AVERAGE_PROCESS_TIME_UNKNOWN')\n\t\t\t\t\t\t\t\t\t\t\t: DurationFormatter.formatTimeInterval(this.#data.stats.averageDuration)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\t\n\t\t\t</div>\n\t\t`;\n\t\tBX.UI.Hint.init(efficiencyInlineContent);\n\n\t\treturn efficiencyInlineContent;\n\t}\n\n\t#renderEfficiencyPopupContent()\n\t{\n\t\tconst [logoClass, notice] = this.#getEfficiencyData();\n\n\t\tconst popup = Tag.render`\n\t\t\t<div class=\"bizproc-timeline-popup\">\n\t\t\t\t<div class=\"bizproc-timeline-popup-title\">\n\t\t\t\t\t${Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_EFFECTIVITY_MARK')}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bizproc-timeline-popup-main\">\n\t\t\t\t\t<div class=\"bizproc-timeline-popup-status\">\n\t\t\t\t\t\t<div class=\"bizproc-timeline-popup-logo ${logoClass}\"></div>\n\t\t\t\t\t\t<div class=\"bizproc-timeline-popup-notice\">${notice}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"bizproc-timeline-popup-content\">\n\t\t\t\t\t\t<div class=\"bizproc-timeline-popup-block\">\n\t\t\t\t\t\t\t<span class=\"bizproc-timeline-popup-val\">\n\t\t\t\t\t\t\t\t${DurationFormatter.formatTimeInterval(this.#data.executionTime)}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tdata-hint=\"${Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_TIME_DIFFERENCE')}\"\n\t\t\t\t\t\t\t></span>\n\t\t\t\t\t\t\t<div class=\"bizproc-timeline-popup-prop\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_CURRENT_PROCESS_TIME')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"bizproc-timeline-popup-block\">\n\t\t\t\t\t\t\t<span class=\"bizproc-timeline-popup-val\">\n\t\t\t\t\t\t\t\t${DurationFormatter.formatTimeInterval(this.#data.stats.averageDuration)}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<div class=\"bizproc-timeline-popup-prop\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_AVERAGE_PROCESS_TIME')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bizproc-timeline-popup-footer\">\n\t\t\t\t\t<p class=\"bizproc-timeline-popup-text\">\n\t\t\t\t\t\t${Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_PERFORMANCE_TUNING_TIP')}\n\t\t\t\t\t</p>\n\t\t\t\t\t<a class=\"bizproc-timeline-popup-text\" href=\"javascript:top.BX.Helper.show('redirect=detail&code=18783714')\">\n\t\t\t\t\t\t${Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_PERFORMANCE_TUNING_LINK')}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\tBX.UI.Hint.init(popup);\n\n\t\treturn popup;\n\t}\n\n\tshowBiPopup(): void\n\t{\n\t\tthis.#getBiPopup().show();\n\t}\n\n\t#getBiPopup(): Popup\n\t{\n\t\tif (!this.#biPopup)\n\t\t{\n\t\t\treturn this.#createBiPopup();\n\t\t}\n\n\t\treturn this.#biPopup;\n\t}\n\n\t#createBiPopup(): Popup\n\t{\n\t\tthis.#biPopup = new Popup({\n\t\t\twidth: 403,\n\t\t\tminHeight: 183,\n\t\t\tcloseIcon: true,\n\t\t\tcontent: this.#renderBiPopupContent(),\n\t\t\tbindElement: {\n\t\t\t\tleft: 207,\n\t\t\t\ttop: 482,\n\t\t\t},\n\t\t\tpadding: 17,\n\t\t\tborderRadius: '18px',\n\t\t\tclassName: '--bizproc-timeline-popup --bi',\n\t\t});\n\n\t\treturn this.#biPopup;\n\t}\n\n\t#renderBiPopupContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"bizproc-timeline-popup\">\n\t\t\t\t<div class=\"bizproc-timeline-popup-title\">${Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_BI_ANALYTICS_TITLE')}</div>\n\t\t\t\t<p class=\"bizproc-timeline-popup-info\">${Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_BI_ANALYTICS_TIP')}</p>\n\t\t\t\t<button class=\"ui-btn ui-btn-light-border ui-btn-round ui-btn-xs\">\n\t\t\t\t\t<span class=\"ui-btn-text\">${Loc.getMessage('BIZPROC_WORKFLOW_TIMELINE_SLIDER_BI_ANALYTICS_LINK')}</span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderLoadingStub(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<img src=\"/bitrix/js/bizproc/workflow/timeline/img/skeleton.svg\"\n\t\t\t\t style=\"width:100%; margin: 0; padding: 0;\"/>\n\t\t`;\n\t}\n\n\t#hasErrors(): boolean\n\t{\n\t\treturn this.#errors.length > 0;\n\t}\n}\n"],"names":["ErrorsView","constructor","props","Type","isArrayFilled","errors","render","Tag","map","message","Text","encode","renderTo","target","Dom","append","TimelineTask","data","isPlainObject","canView","isBoolean","status","TaskStatus","id","isInteger","name","isString","modified","Math","max","users","isArray","executionTime","approveType","url","isStringFilled","DurationFormatter","formatTimestamp","timestamp","DateTimeFormat","format","Date","now","formatTimeInterval","interval","values","isNil","Loc","getMessage","result","remainder","i","length","multiplier","formatDate","seconds","limit","Timeline","options","config","setTimeout","workflowId","dateFormat","timeFormat","open","Runtime","loadExtension","then","BX","SidePanel","Instance","Uri","addParam","width","allowChangeHistory","cacheable","loader","catch","response","console","error","clean","errorsView","replace","show","getStatusName","taskStatus","taskApproveType","isYes","isOk","isNo","isCancel","isWaiting","showBiPopup","ajax","runAction","getString","value","defaultValue","getArray","getBool","getInteger","document","DocumentId","documentId","documentType","entityName","documentName","documentUrl","moduleName","isWorkflowRunning","timeToStart","started","startedBy","tasks","taskData","Map","stats","averageDuration","efficiency","user","set","toInteger","title","iconClass","iconText","crop","iconClassValue","iconTextValue","cropValue","subject","task","uri","setQueryParams","workflow","toString","userId","userData","get","userClass","position","workPosition","avatar","avatarSize100","button","link","fullName","type","caption","text","timelineNotice","UI","Hint","init","statusClass","statusClassValue","children","itemClass","efficiencyClass","itemClassValue","efficiencyClassValue","hideMarksScript","votedCnt","totalCnt","items","content","push","taskNumber","hasHidden","parseInt","taskIndex","Object","keys","taskNumberNeeded","techItemClass","textCropNodes","querySelectorAll","textCropNode","TextCrop","rows","Popup","minHeight","closeIcon","bindElement","left","top","padding","borderRadius","className","events","onPopupClose","inlineEfficiencyPrev","querySelector","addClass","efficiencyInlineClass","getAttribute","after","logoClass","notice","efficiencyInlineContent","popup"],"mappings":"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"}