this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(e,t,s,i,o,r,n,a,l,c,d){"use strict";const p="http://127.0.0.1:20141";const b=500;const v="bx-im-messenger__out-of-view";const u="//www.bitrixsoft.com/200.ok";const h={};const f={testImageLoad(e,t){const s=Date.now();let i=false;const o=l.Dom.create({tag:"img",attrs:{src:`${p}/icon.png?${s}`,"data-id":s},props:{className:v},events:{error:function(){if(i){return}const e=this.dataset.id;t(false,e);clearTimeout(h[e]);l.Dom.remove(this)},load:function(){const t=this.dataset.id;e(true,t);clearTimeout(h[t]);l.Dom.remove(this)}}});document.body.append(o);h[s]=setTimeout((()=>{i=true;t(false,s);l.Dom.remove(o)}),b)},testInternetConnection(){const e=Date.now();return new Promise((t=>{fetch(`${u}.${e}`).then((e=>{if(e.status===200){return t(true)}t(false)})).catch((()=>{t(false)}))}))}};let L=[];let g=0;const k={openConference(e){if(!n.Utils.conference.isValidCode(e)){return false}if(!c.DesktopApi.isDesktop()){return false}let t=null;const s=[{width:2560,height:1440},{width:2048,height:1152},{width:1920,height:1080},{width:1600,height:900},{width:1366,height:768},{width:1024,height:576}];for(const e of s){t=e;if(screen.width>e.width&&screen.height>e.height){break}}L=L.filter((e=>Boolean(c.DesktopApi.findWindow(e))));L.push(n.Utils.conference.getWindowNameByCode(e));c.DesktopApi.createWindow(n.Utils.conference.getWindowNameByCode(e),(s=>{s.SetProperty("title",l.Loc.getMessage("IM_LIB_DESKTOP_CONFERENCE_TITLE"));s.SetProperty("clientSize",{Width:t.width,Height:t.height});s.ExecuteCommand("center");s.SetProperty("minClientSize",{Width:940,Height:400});s.SetProperty("backgroundColor","#2B3038");s.ExecuteCommand("html.load",`<script>location.href="/desktop_app/router.php?alias=${e}&videoconf";<\/script>`);s.ExecuteCommand("show");s.ExecuteCommand("center")}));return true},toggleConference(){if(g>L.length-1){g=0;c.DesktopApi.showWindow();return true}L=L.filter((e=>Boolean(c.DesktopApi.findWindow(e))));for(let e=g;e<L.length;e++){g++;const t=c.DesktopApi.findWindow(L[e]);if(t){c.DesktopApi.activateWindow(t);break}}return true}};const P=60*60*1e3;var B=babelHelpers.classPrivateFieldLooseKey("initDate");var y=babelHelpers.classPrivateFieldLooseKey("sidePanelManager");var D=babelHelpers.classPrivateFieldLooseKey("startReloadCheck");var C=babelHelpers.classPrivateFieldLooseKey("isReloadNeeded");var w=babelHelpers.classPrivateFieldLooseKey("reloadWindow");class F{static init(){return new F}constructor(){Object.defineProperty(this,w,{value:T});Object.defineProperty(this,C,{value:m});Object.defineProperty(this,D,{value:H});Object.defineProperty(this,B,{writable:true,value:void 0});Object.defineProperty(this,y,{writable:true,value:BX.SidePanel.Instance});babelHelpers.classPrivateFieldLooseBase(this,B)[B]=new Date;babelHelpers.classPrivateFieldLooseBase(this,D)[D]()}}function H(){setInterval((async()=>{const e=await babelHelpers.classPrivateFieldLooseBase(this,C)[C]();if(e){babelHelpers.classPrivateFieldLooseBase(this,w)[w]()}}),P)}async function m(){if(n.Utils.date.isSameDay(new Date,babelHelpers.classPrivateFieldLooseBase(this,B)[B])){return false}if(babelHelpers.classPrivateFieldLooseBase(this,y)[y].opened){d.Logger.desktop("Checker: checkDayForReload, slider is open - delay reload");return false}if(i.CallManager.getInstance().hasCurrentCall()){d.Logger.desktop("Checker: checkDayForReload, call is active - delay reload");return false}return f.testInternetConnection()}function T(){d.Logger.desktop("Checker: checkDayForReload, new day - reload window");c.DesktopApi.reloadWindow()}const x="!!";const E={encodeParams(e){if(!l.Type.isPlainObject(e)){return""}let t="";Object.entries(e).forEach((([e,s])=>{const i="";t+=`${i}${e}${x}${s}`}));return t},decodeParams(e){const t={};if(!l.Type.isStringFilled(e)){return t}const s=e.split(x);for(let e=0;e<s.length;e+=2){const i=s[e];const o=s[e+1];t[i]=o}return t},encodeParamsJson(e){if(!l.Type.isPlainObject(e)){return"{}"}let t="";try{t=encodeURIComponent(JSON.stringify(e))}catch(e){console.error("DesktopUtils: could not encode params.",e);t="{}"}return t},decodeParamsJson(e){let t={};if(!l.Type.isStringFilled(e)){return t}try{t=JSON.parse(decodeURIComponent(e))}catch(e){console.error("DesktopUtils: could not decode encoded params.",e)}return t}};var A=babelHelpers.classPrivateFieldLooseKey("subscribeToBxProtocolEvent");var S=babelHelpers.classPrivateFieldLooseKey("subscribeToLegacyBxProtocolEvent");class I{static init(){return new I}constructor(){Object.defineProperty(this,S,{value:M});Object.defineProperty(this,A,{value:O});babelHelpers.classPrivateFieldLooseBase(this,A)[A]();babelHelpers.classPrivateFieldLooseBase(this,S)[S]()}}function O(){c.DesktopApi.subscribe(a.EventType.desktop.onBxLink,((e,s)=>{const i=s!=null?s:{};Object.entries(i).forEach((([e,t])=>{i[e]=decodeURIComponent(t)}));c.DesktopApi.activateWindow();if(e===a.DesktopBxLink.chat){void t.Messenger.openChat(i.dialogId)}else if(e===a.DesktopBxLink.lines){void t.Messenger.openLines(i.dialogId)}else if(e===a.DesktopBxLink.conference){void qe.getInstance().openConference(i.code)}else if(e===a.DesktopBxLink.call){const e=i.withVideo!=="N";void t.Messenger.startVideoCall(i.dialogId,e)}else if(e===a.DesktopBxLink.phone){const e=E.decodeParamsJson(i.phoneParams);void t.Messenger.startPhoneCall(i.number,e)}else if(e===a.DesktopBxLink.callList){const e=E.decodeParamsJson(i.callListParams);void t.Messenger.startCallList(i.callListId,e)}else if(e===a.DesktopBxLink.notifications){void t.Messenger.openNotifications()}else if(e===a.DesktopBxLink.recentSearch){void t.Messenger.openRecentSearch()}else if(e===a.DesktopBxLink.copilot){void t.Messenger.openCopilot(i.dialogId)}else if(e===a.DesktopBxLink.settings){void t.Messenger.openSettings({onlyPanel:i.section})}else if(e===a.DesktopBxLink.timeManager){var o,r;(o=BX.Timeman)==null?void 0:(r=o.Monitor)==null?void 0:r.openReport()}else if(e===a.DesktopBxLink.openTab){c.DesktopApi.setActiveTab()}}))}function M(){c.DesktopApi.subscribe(a.EventType.desktop.onBxLink,((e,s)=>{const i=s!=null?s:{};Object.entries(i).forEach((([e,t])=>{i[e]=decodeURIComponent(t)}));c.DesktopApi.activateWindow();if(e===a.LegacyDesktopBxLink.messenger){if(i.dialog){void t.Messenger.openChat(i.dialog)}else if(i.chat){void t.Messenger.openChat(`chat${i.chat}`)}else{void t.Messenger.openChat()}}else if(e===a.LegacyDesktopBxLink.chat&&i.id){void t.Messenger.openChat(`chat${i.id}`)}else if(e===a.LegacyDesktopBxLink.notify){void t.Messenger.openNotifications()}else if(e===a.LegacyDesktopBxLink.callTo){if(i.video){void t.Messenger.startVideoCall(i.video)}else if(i.audio){void t.Messenger.startVideoCall(i.audio,false)}else if(i.phone){void t.Messenger.startPhoneCall(i.phone)}}else if(e===a.LegacyDesktopBxLink.callList){void t.Messenger.openRecentSearch()}}))}var j=babelHelpers.classPrivateFieldLooseKey("subscribeToLogoutEvent");var K=babelHelpers.classPrivateFieldLooseKey("onExit");class ${static init(){return new $}constructor(){Object.defineProperty(this,K,{value:U});Object.defineProperty(this,j,{value:W});babelHelpers.classPrivateFieldLooseBase(this,j)[j]()}}function W(){c.DesktopApi.subscribe(a.EventType.desktop.onExit,babelHelpers.classPrivateFieldLooseBase(this,K)[K].bind(this))}function U(){s.runAction(a.RestMethod.imV2DesktopLogout).finally((()=>{c.DesktopApi.shutdown()}))}var R=babelHelpers.classPrivateFieldLooseKey("initDate");var N=babelHelpers.classPrivateFieldLooseKey("wakeUpTimer");var X=babelHelpers.classPrivateFieldLooseKey("subscribeToWakeUpEvent");var _=babelHelpers.classPrivateFieldLooseKey("onWakeUp");var V=babelHelpers.classPrivateFieldLooseKey("subscribeToIconClickEvent");var J=babelHelpers.classPrivateFieldLooseKey("onIconClick");var z=babelHelpers.classPrivateFieldLooseKey("subscribeToAwayEvent");var Y=babelHelpers.classPrivateFieldLooseKey("onUserAway");var q=babelHelpers.classPrivateFieldLooseKey("subscribeToFocusEvent");var G=babelHelpers.classPrivateFieldLooseKey("subscribeToBlurEvent");var Q=babelHelpers.classPrivateFieldLooseKey("removeNativeNotifications");var Z=babelHelpers.classPrivateFieldLooseKey("setInitialStatus");var ee=babelHelpers.classPrivateFieldLooseKey("subscribeToStatusChange");class te{static init(){return new te}constructor(){Object.defineProperty(this,ee,{value:be});Object.defineProperty(this,Z,{value:pe});Object.defineProperty(this,Q,{value:de});Object.defineProperty(this,G,{value:ce});Object.defineProperty(this,q,{value:le});Object.defineProperty(this,Y,{value:ae});Object.defineProperty(this,z,{value:ne});Object.defineProperty(this,J,{value:re});Object.defineProperty(this,V,{value:oe});Object.defineProperty(this,_,{value:ie});Object.defineProperty(this,X,{value:se});Object.defineProperty(this,R,{writable:true,value:void 0});Object.defineProperty(this,N,{writable:true,value:null});this.sidePanelManager=BX.SidePanel.Instance;babelHelpers.classPrivateFieldLooseBase(this,R)[R]=new Date;babelHelpers.classPrivateFieldLooseBase(this,X)[X]();babelHelpers.classPrivateFieldLooseBase(this,z)[z]();babelHelpers.classPrivateFieldLooseBase(this,q)[q]();babelHelpers.classPrivateFieldLooseBase(this,G)[G]();babelHelpers.classPrivateFieldLooseBase(this,V)[V]();babelHelpers.classPrivateFieldLooseBase(this,Z)[Z]();babelHelpers.classPrivateFieldLooseBase(this,ee)[ee]()}}function se(){c.DesktopApi.subscribe(a.EventType.desktop.onWakeUp,babelHelpers.classPrivateFieldLooseBase(this,_)[_].bind(this))}async function ie(){const e=await f.testInternetConnection();if(!e){d.Logger.desktop("StatusHandler: onWakeUp event, no internet connection, delay 60 sec");clearTimeout(babelHelpers.classPrivateFieldLooseBase(this,N)[N]);babelHelpers.classPrivateFieldLooseBase(this,N)[N]=setTimeout(babelHelpers.classPrivateFieldLooseBase(this,_)[_].bind(this),60*1e3);return}if(n.Utils.date.isSameHour(new Date,babelHelpers.classPrivateFieldLooseBase(this,R)[R])){d.Logger.desktop("StatusHandler: onWakeUp event, same hour - restart pull client");o.Core.getPullClient().restart()}else{if(this.sidePanelManager.opened){clearTimeout(babelHelpers.classPrivateFieldLooseBase(this,N)[N]);babelHelpers.classPrivateFieldLooseBase(this,N)[N]=setTimeout(babelHelpers.classPrivateFieldLooseBase(this,_)[_].bind(this),60*1e3);d.Logger.desktop("StatusHandler: onWakeUp event, slider is open, delay 60 sec");return}d.Logger.desktop("StatusHandler: onWakeUp event, reload window");c.DesktopApi.reloadWindow()}}function oe(){c.DesktopApi.subscribe(a.EventType.desktop.onIconClick,babelHelpers.classPrivateFieldLooseBase(this,J)[J].bind(this))}function re(){qe.getInstance().toggleConference()}function ne(){c.DesktopApi.subscribe(a.EventType.desktop.onUserAway,babelHelpers.classPrivateFieldLooseBase(this,Y)[Y].bind(this))}function ae(e){const t=e?a.RestMethod.imUserStatusIdleStart:a.RestMethod.imUserStatusIdleEnd;o.Core.getRestClient().callMethod(t).catch((e=>{console.error(`Desktop: error in ${t}  - ${e}`)}))}function le(){l.Event.bind(window,"focus",babelHelpers.classPrivateFieldLooseBase(this,Q)[Q].bind(this))}function ce(){l.Event.bind(window,"blur",babelHelpers.classPrivateFieldLooseBase(this,Q)[Q].bind(this))}function de(){if(!l.Browser.isWin()||!c.DesktopApi.isChatWindow()){return}c.DesktopApi.removeNativeNotifications()}function pe(){const e=o.Core.getStore().getters["application/settings/get"](a.Settings.user.status);c.DesktopApi.setIconStatus(e)}function be(){const e=(e,t)=>t["application/settings/get"](a.Settings.user.status);o.Core.getStore().watch(e,(e=>{c.DesktopApi.setIconStatus(e)}))}var ve=babelHelpers.classPrivateFieldLooseKey("store");var ue=babelHelpers.classPrivateFieldLooseKey("subscribeToCountersChange");var he=babelHelpers.classPrivateFieldLooseKey("onCounterChange");class fe{static init(){return new fe}constructor(){Object.defineProperty(this,he,{value:ge});Object.defineProperty(this,ue,{value:Le});Object.defineProperty(this,ve,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,ve)[ve]=o.Core.getStore();babelHelpers.classPrivateFieldLooseBase(this,he)[he]();babelHelpers.classPrivateFieldLooseBase(this,ue)[ue]()}}function Le(){r.EventEmitter.subscribe(a.EventType.counter.onNotificationCounterChange,babelHelpers.classPrivateFieldLooseBase(this,he)[he].bind(this));r.EventEmitter.subscribe(a.EventType.counter.onChatCounterChange,babelHelpers.classPrivateFieldLooseBase(this,he)[he].bind(this))}function ge(){const e=babelHelpers.classPrivateFieldLooseBase(this,ve)[ve].getters["counters/getTotalChatCounter"];const t=babelHelpers.classPrivateFieldLooseBase(this,ve)[ve].getters["notifications/getCounter"];const s=e>0;c.DesktopApi.setCounter(e+t,s)}var ke=babelHelpers.classPrivateFieldLooseKey("bindHotkeys");class Pe{static init(){return new Pe}constructor(){Object.defineProperty(this,ke,{value:Be});babelHelpers.classPrivateFieldLooseBase(this,ke)[ke]()}}function Be(){l.Event.bind(window,"keydown",(e=>{const t=n.Utils.key.isCombination(e,"Ctrl+R");if(t){c.DesktopApi.reloadWindow();d.Logger.desktop("NOTICE: User reload window (hotkey)");return}const s=n.Utils.key.isCombination(e,"Ctrl+Shift+L");if(s){c.DesktopApi.openLogsFolder();d.Logger.desktop("NOTICE: User open log folder (hotkey)");return}const i=n.Utils.key.isCombination(e,"Ctrl+Shift+D");if(i){c.DesktopApi.openDeveloperTools();d.Logger.desktop("NOTICE: User open developer tools (hotkey)")}}))}var ye=babelHelpers.classPrivateFieldLooseKey("subscribeToNewTabEvent");var De=babelHelpers.classPrivateFieldLooseKey("onNewTabClick");class Ce{static init(){return new Ce}constructor(){Object.defineProperty(this,De,{value:Fe});Object.defineProperty(this,ye,{value:we});babelHelpers.classPrivateFieldLooseBase(this,ye)[ye]()}}function we(){c.DesktopApi.subscribe(a.EventType.desktop.onNewTabClick,babelHelpers.classPrivateFieldLooseBase(this,De)[De].bind(this))}function Fe(){const e=l.Loc.getMessage("SITE_DIR")||"/";BX.SidePanel.Instance.open(`${e}sitemap/?IM_DESKTOP_NEW_TAB=Y`,{allowChangeHistory:false,customLeftBoundary:0})}var He=babelHelpers.classPrivateFieldLooseKey("sendInitEvent");var me=babelHelpers.classPrivateFieldLooseKey("initSliderBindings");var Te=babelHelpers.classPrivateFieldLooseKey("getSliderBindingsStatus");var xe=babelHelpers.classPrivateFieldLooseKey("initComplete");var Ee=babelHelpers.classPrivateFieldLooseKey("subscribeOnErrorEvent");var Ae=babelHelpers.classPrivateFieldLooseKey("handleInvalidAuthError");class Se{static init(){return new Se}constructor(){Object.defineProperty(this,Ae,{value:$e});Object.defineProperty(this,Ee,{value:Ke});Object.defineProperty(this,xe,{value:je});Object.defineProperty(this,Te,{value:Me});Object.defineProperty(this,me,{value:Oe});Object.defineProperty(this,He,{value:Ie});F.init();te.init();$.init();I.init();fe.init();Pe.init();Ce.init();babelHelpers.classPrivateFieldLooseBase(this,He)[He]();babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee]();babelHelpers.classPrivateFieldLooseBase(this,me)[me]();babelHelpers.classPrivateFieldLooseBase(this,xe)[xe]()}}function Ie(){const{currentUser:e}=o.Core.getApplicationData();c.DesktopApi.emit(a.EventType.desktop.onInit,[{userInfo:e!=null?e:{}}])}function Oe(){const e=babelHelpers.classPrivateFieldLooseBase(this,Te)[Te]();if(e){BX.SidePanel.Instance.enableAnchorBinding();return}BX.SidePanel.Instance.disableAnchorBinding()}function Me(){const e=c.DesktopApi.getCustomSetting(c.DesktopSettingsKey.sliderBindingsStatus,"1");return e==="1"}function je(){c.DesktopApi.setLogInfo=function(...e){d.Logger.desktop(...e)};window.BX.debugEnable(true);c.DesktopApi.printWelcomePrompt()}function Ke(){r.EventEmitter.subscribe(a.EventType.request.onAuthError,(()=>babelHelpers.classPrivateFieldLooseBase(this,Ae)[Ae]()))}function $e(){return c.DesktopApi.login()}var We=babelHelpers.classPrivateFieldLooseKey("initComplete");class Ue{static init(){return new Ue}constructor(){Object.defineProperty(this,We,{value:Re});Ce.init();babelHelpers.classPrivateFieldLooseBase(this,We)[We]()}}function Re(){c.DesktopApi.setLogInfo=function(...e){d.Logger.desktop(...e)}}const Ne=2;const Xe=1e3;var _e=babelHelpers.classPrivateFieldLooseKey("desktopIsActive");var Ve=babelHelpers.classPrivateFieldLooseKey("locationChangedToBx");var Je=babelHelpers.classPrivateFieldLooseKey("enableRedirectCounter");var ze=babelHelpers.classPrivateFieldLooseKey("prepareBxUrl");var Ye=babelHelpers.classPrivateFieldLooseKey("initDesktopStatus");class qe{static getInstance(){if(!this.instance){this.instance=new this}return this.instance}static init(){qe.getInstance()}static isDesktop(){return c.DesktopApi.isDesktop()}static isChatWindow(){return c.DesktopApi.isChatWindow()}constructor(){Object.defineProperty(this,Ye,{value:Qe});Object.defineProperty(this,ze,{value:Ge});Object.defineProperty(this,_e,{writable:true,value:void 0});Object.defineProperty(this,Ve,{writable:true,value:false});Object.defineProperty(this,Je,{writable:true,value:1});babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye]();if(qe.isDesktop()){if(c.DesktopApi.isChatWindow()){Se.init()}else{Ue.init()}}}isDesktopActive(){if(qe.isDesktop()){return true}return babelHelpers.classPrivateFieldLooseBase(this,_e)[_e]}setDesktopActive(e){babelHelpers.classPrivateFieldLooseBase(this,_e)[_e]=e}isLocationChangedToBx(){return babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve]}redirectToChat(e=""){d.Logger.warn("Desktop: redirectToChat",e);this.openBxLink(`bx://${a.DesktopBxLink.chat}/dialogId/${e}`);return Promise.resolve()}redirectToLines(e=""){d.Logger.warn("Desktop: redirectToLines",e);this.openBxLink(`bx://${a.DesktopBxLink.lines}/dialogId/${e}`);return Promise.resolve()}redirectToCopilot(e=""){d.Logger.warn("Desktop: redirectToCopilot",e);this.openBxLink(`bx://${a.DesktopBxLink.copilot}/dialogId/${e}`);return Promise.resolve()}redirectToNotifications(){d.Logger.warn("Desktop: redirectToNotifications");this.openBxLink(`bx://${a.DesktopBxLink.notifications}`);return Promise.resolve()}redirectToRecentSearch(){d.Logger.warn("Desktop: redirectToRecentSearch");this.openBxLink(`bx://${a.DesktopBxLink.recentSearch}`);return Promise.resolve()}redirectToConference(e){d.Logger.warn("Desktop: redirectToConference",e);this.openBxLink(`bx://${a.DesktopBxLink.conference}/code/${e}`);return Promise.resolve()}redirectToSettings(e){d.Logger.warn("Desktop: redirectToSettings",e);this.openBxLink(`bx://${a.DesktopBxLink.settings}/section/${e}`);return Promise.resolve()}openConference(e){d.Logger.warn("Desktop: openConference",e);const t=k.openConference(e);if(!t){return Promise.resolve(false)}return Promise.resolve(true)}toggleConference(){d.Logger.warn("Desktop: toggleConference");k.toggleConference()}redirectToVideoCall(e="",t=true){d.Logger.warn("Desktop: redirectToVideoCall",e,t);const s=t?"Y":"N";this.openBxLink(`bx://${a.DesktopBxLink.call}/dialogId/${e}/withVideo/${s}`);return Promise.resolve()}redirectToPhoneCall(e,t){d.Logger.warn("Desktop: redirectToPhoneCall",e,t);const s=E.encodeParamsJson(t);this.openBxLink(`bx://${a.DesktopBxLink.phone}/number/${e}/phoneParams/${s}`);return Promise.resolve()}redirectToCallList(e,t){d.Logger.warn("Desktop: redirectToCallList",e,t);const s=E.encodeParamsJson(t);this.openBxLink(`bx://${a.DesktopBxLink.callList}/callListId/${e}/callListParams/${s}`);return Promise.resolve()}openAccountTab(e){this.openBxLink(`bx://v2/${e}/openTab`)}checkStatusInDifferentContext(){if(!this.isDesktopActive()){return Promise.resolve(false)}if(c.DesktopApi.isChatWindow()){return Promise.resolve(false)}return new Promise((e=>{f.testImageLoad((()=>{e(true)}),(()=>{e(false)}))}))}checkForRedirect(){if(!this.isRedirectEnabled()||!this.isRedirectOptionEnabled()){return Promise.resolve(false)}return this.checkStatusInDifferentContext()}isRedirectEnabled(){return babelHelpers.classPrivateFieldLooseBase(this,Je)[Je]>0}enableRedirect(){babelHelpers.classPrivateFieldLooseBase(this,Je)[Je]++}disableRedirect(){babelHelpers.classPrivateFieldLooseBase(this,Je)[Je]--}isRedirectOptionEnabled(){if(c.DesktopApi.isDesktop()&&!c.DesktopApi.isChatWindow()){return true}return o.Core.getStore().getters["application/settings/get"](a.Settings.desktop.enableRedirect)}openBxLink(e){const t=babelHelpers.classPrivateFieldLooseBase(this,ze)[ze](e);babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve]=true;setTimeout((()=>{const e=new r.BaseEvent({compatData:[]});r.EventEmitter.emit(window,"BXLinkOpened",e);babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve]=false}),Xe);location.href=t}}function Ge(e){if(/^bx:\/\/v(\d)\//.test(e)){return e}return e.replace("bx://",`bx://v${Ne}/${location.hostname}/`)}function Qe(){const e=l.Extension.getSettings("im.v2.lib.desktop");this.setDesktopActive(e.get("desktopIsActive"))}e.DesktopManager=qe})(this.BX.Messenger.v2.Lib=this.BX.Messenger.v2.Lib||{},BX.Messenger.v2.Lib,BX.Messenger.v2.Lib,BX.Messenger.v2.Lib,BX.Messenger.v2.Application,BX.Event,BX.Messenger.v2.Lib,BX.Messenger.v2.Const,BX,BX.Messenger.v2.Lib,BX.Messenger.v2.Lib);
//# sourceMappingURL=desktop-manager.bundle.map.js