{"version":3,"file":"parser.bundle.map.js","names":["this","BX","UI","exports","main_core","ui_bbcode_encoder","ui_bbcode_model","getByIndex","array","index","Type","isArray","TypeError","isInteger","preparedIndex","length","ParserScheme","BBCodeScheme","getTagScheme","tagName","BBCodeTagScheme","name","convertChild","child","scheme","includes","getName","createText","toString","isAllowedTag","isChildAllowed","parent","TAG_REGEX","isSpecialChar","symbol","isList","String","toLowerCase","isListItem","parserScheme","BBCodeParser","constructor","options","setScheme","DefaultBBCodeScheme","isFunction","onUnknown","setOnUnknown","defaultOnUnknownHandler","encoder","BBCodeEncoder","setEncoder","getScheme","handler","onUnknownHandler","getOnUnknownHandler","getEncoder","static","node","getType","BBCodeNode","ELEMENT_NODE","nodeName","replace","createElement","children","getChildren","openingTag","getOpeningTag","closingTag","getClosingTag","value","isStringFilled","parseText","text","reduce","acc","push","lastItem","isNil","map","fragment","createNewLine","createTab","content","decodeText","bbcode","startIndex","nextContent","slice","nextTag","match","RegExp","indexOf","source","test","parseAttributes","sourceAttributes","result","attributes","startsWith","decodeAttribute","trimQuotes","trim","split","filter","Boolean","item","key","parse","createRoot","firstTagIndex","findNextTagIndex","textBeforeFirstTag","appendChild","stack","wasOpened","current","level","fullTag","slash","attrs","isOpeningTag","lowerCaseTagName","isPotentiallyVoid","tagScheme","isAllowedVoidTag","isVoid","Object","fromEntries","nextTagIndex","openedTagIndex","splice","getFinalLineBreaksIndexes","skip","reduceRight","flattenAst","forEach","finalLinebreaksIndexes","setChildren","BBCode"],"sources":["parser.bundle.js"],"mappings":"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"}